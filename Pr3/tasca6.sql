CREATE TABLE IF NOT EXISTS departament (
 	d_num	INT PRIMARY KEY,
 	d_nom	VARCHAR(14) NOT NULL UNIQUE,
 	d_loc	VARCHAR(14),
 );

INSERT INTO departament VALUES (10, 'COMPTABILITAT', 'SEVILLA');
INSERT INTO departament VALUES (20, 'INVESTIGACIO', 'MADRID');
INSERT INTO departament VALUES (30, 'VENDES', 'BARCELONA');
INSERT INTO departament VALUES (40, 'PRODUCCIÃ“', 'BILBAO');


CREATE TABLE IF NOT EXISTS empleats (
 	e_codi    INT PRIMARY KEY,
 	cognom    VARCHAR (10) NOT NULL,
 	ofici     VARCHAR (10), /*Director, analista, president, empleat, venedor, secretari,.*/
 	cap 	INT, /*CAP QUE TE EMPLEAT*/
 	data_alta DATETIME,
 	salari    DECIMAL(12,2),
 	comissio  DECIMAL(4,2),
 	
 	d_num	INT,
 	

	FOREIGN KEY (d_num) REFERENCES departament(d_num),
	FOREIGN KEY (cap) REFERENCES emp(e_codi)
);


INSERT INTO empleats VALUES (7369,'SANCHEZ','EMPLEAT',7902, '1980-12-17', 104000,NULL,20);
INSERT INTO empleats VALUES (7499,'ARROYO','VENEDOR',7698, '1980-02-20', 208000,39000,30);
INSERT INTO empleats VALUES (7521,'SALA','VENEDOR',7698, '1981-02-22', 162500,65000,30);
INSERT INTO empleats VALUES (7566,'JIMENEZ','DIRECTOR',7839, '1981-04-02', 386750,NULL,20);
INSERT INTO empleats VALUES (7654,'MARTIN','VENEDOR',7698, '1981-09-29', 162500,182000,30);
INSERT INTO empleats VALUES (7698,'NEGRO','DIRECTOR',7839, '1981-05-01', 370500,NULL,30);
INSERT INTO empleats VALUES (7782,'CEREZO','DIRECTOR',7839, '1981-06-09', 318500,NULL,10);
INSERT INTO empleats VALUES (7788,'GIL','ANALISTA',7566, '1981-11-09', 390000,NULL,20);
INSERT INTO empleats VALUES (7839,'REY','PRESIDENT',NULL, '1981-11-17', 650000,NULL,10);
INSERT INTO empleats VALUES (7844,'TOVAR','VENEDOR',7698, '1981-09-08', 195000,0,30);
INSERT INTO empleats VALUES (7876,'ALONSO','EMPLEAT',7788, '1981-09-23', 143000,NULL,20);
INSERT INTO empleats VALUES (7900,'JIMENO','EMPLEAT',7698, '1981-12-03', 123500,NULL,30);
INSERT INTO empleats VALUES (7902,'FERNANDEZ','ANALISTA',7566, '1981-12-03', 390000,NULL,20);
INSERT INTO empleatS VALUES (7934,'MUNOZ','EMPLEAT',7782, '1982-01-23', 169000,NULL,10);


CREATE TABLE IF NOT EXISTS client (
 	c_codi	INT(6) PRIMARY KEY,
 	c_nom	VARCHAR (45) NOT NULL,
 	addr	VARCHAR (40) NOT NULL,
 	ciutat	VARCHAR (30) NOT NULL,
 	codi_post VARCHAR (9) NOT NULL,
 	telf	NUMERIC(9,0),
 	lim_cred	DECIMAL(9,2),
 	obs		TEXT,

 	FOREIGN KEY (REPR_COD) REFERENCES emp(EMP_NO)
);


CREATE TABLE IF NOT EXISTS comanda (
 	c_num	INT PRIMARY KEY autoincrement,
	c_data 	DATE,
 	c_tipus VARCHAR(10),
 	c_codi INT (6) NOT NULL,
 	data_tramesa DATETIME,
 	--TOTAL               DECIMAL(8,2),
 	FOREIGN KEY (c_codi) REFERENCES client(c_codi) 
 	CHECK (COM_TIPUS IN ('A','B','C',NULL)
);

CREATE TABLE IF NOT EXISTS producte (
	p_codi  INT (6) PRIMARY KEY,
	descrip	TEXT
);


